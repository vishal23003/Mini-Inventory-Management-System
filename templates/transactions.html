{% extends "base.html" %}
{% block content %}
  <h1 class="text-2xl font-bold mb-4">Transactions</h1>

  <div class="bg-white p-4 rounded shadow mb-4">
    <h2 class="font-semibold">Record Transaction</h2>
    <form action="/transactions/add" method="post" class="grid grid-cols-3 gap-2 mt-2 items-center">
      <select name="product_id" class="p-2 border">
        {% for p in products %}
          <option value="{{ p.id }}">{{ p.name }} ({{ p.quantity }} in stock)</option>
        {% endfor %}
      </select>
      <select name="type" class="p-2 border">
        <option value="purchase">Purchase</option>
        <option value="sale">Sale</option>
      </select>
      <input name="quantity" placeholder="Quantity" type="number" class="p-2 border"/>
      <div></div>
      <div></div>
      <button class="bg-blue-600 text-white p-2 rounded">Record</button>
    </form>
  </div>

  <div class="bg-white p-4 rounded shadow">
    <h2 class="font-semibold">Recent Transactions</h2>
    <table class="w-full mt-2">
      <thead><tr class="text-left"><th>Time</th><th>Product</th><th>Type</th><th>Qty</th><th>Unit Price</th></tr></thead>
      <tbody>
        {% for t in txns %}
          <tr>
            <td>{{ t.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ t.product.name }}</td>
            <td>{{ t.type }}</td>
            <td>{{ t.quantity }}</td>
            <td>â‚¹ {{ '%.2f' % t.unit_price }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
